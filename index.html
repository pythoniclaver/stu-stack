<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ads Stacking and Pixels Stuffing</title>

    <!-- The styles is located here -->
    <!-- All this styles are important so don't leave any behind -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- This isn't important, I used this ads to test my script -->
    <div class="elementor-widget-container">
      <iframe
        id="ad2"
        loading="lazy"
        data-aa="2215450"
        src="ad.html"
        style="
          width: 360px;
          height: 100px;
          border: 0px;
          padding: 0;
          overflow: hidden;
          background-color: transparent;
          margin: 0 auto;
          display: flex;
        "
      ></iframe>
    </div>
    <div class="elementor-widget-container">
      <iframe
        id="ad2"
        loading="lazy"
        data-aa="2215450"
        src="ad.html"
        style="
          width: 360px;
          height: 100px;
          border: 0px;
          padding: 0;
          overflow: hidden;
          background-color: transparent;
          margin: 0 auto;
          display: flex;
        "
      ></iframe>
    </div>
    <div class="elementor-widget-container">
      <iframe
        id="ad2"
        loading="lazy"
        data-aa="2215450"
        src="ad.html"
        style="
          width: 360px;
          height: 100px;
          border: 0px;
          padding: 0;
          overflow: hidden;
          background-color: transparent;
          margin: 0 auto;
          display: flex;
        "
      ></iframe>
    </div>
    <div class="elementor-widget-container">
      <a
        donto=""
        style="
          top: 0px;
          left: 934px;
          width: 0px;
          height: 0px;
          position: absolute;
          z-index: 2147483647;
        "
      ></a>
    </div>
    <div class="elementor-widget-container">
      <a
        donto=""
        style="
          top: 0px;
          left: 934px;
          width: 0px;
          height: 0px;
          position: absolute;
          z-index: 2147483647;
        "
      ></a>
    </div>
    <div class="elementor-widget-container">
      <a
        donto=""
        style="
          top: 0px;
          left: 934px;
          width: 0px;
          height: 0px;
          position: absolute;
          z-index: 2147483647;
        "
      ></a>
    </div>

    <!-- This container will be where those ads will be placed. So it is important to create a empty div with this ID -->
    <div id="mainCon"></div>

    Hello world!

    <!-- This is important so replicate the lines of code inside of the script on the wordpress website -->
    <script>
      // Get all the iframes with class name "elementor-widget-container"
      var iframes = document.querySelectorAll(
        ".elementor-widget-container iframe"
      );

      // Create a container element
      var container = document.createElement("div");
      container.className = "adContainer";

      // Loop through each iframe and clone it to append it to the container
      for (var i = 0; i < iframes.length; i++) {
        var iframe = iframes[i];
        var clonedIframe = iframe.cloneNode(true);
        container.appendChild(clonedIframe);
      }

      // Remove the iframes and their parent elements with class name "elementor-widget-container"
      var widgetContainers = document.getElementsByClassName(
        "elementor-widget-container"
      );
      for (var i = widgetContainers.length - 1; i >= 0; i--) {
        widgetContainers[i].parentNode.removeChild(widgetContainers[i]);
      }

      // Append the container with all the cloned iframes to a desired location in the document
      var targetElement = document.getElementById("mainCon");
      targetElement.appendChild(container);

      // Add click and hover event listeners to the adContainer
      var adContainer = document.getElementById("mainCon");
      var adsIframes = document.querySelectorAll(".adContainer iframe");
      var links = document.querySelectorAll(".adContainer a");

      var hoverTimeout; // Variable to hold the timeout ID for hover event
      var clickFlag = false; // Flag to track if click event has been triggered

      adContainer.addEventListener("click", function () {
        // Trigger click event on each iframe inside the adContainer
        if (!clickFlag) {
          for (var i = 0; i < adsIframes.length; i++) {
            var iframe = adsIframes[i];
            var link = links[i];
            iframe.click();
            link.click();
            console.log("Click event called for iframe:", iframe.id);
          }
          clickFlag = true;
        } else {
          clickFlag = false;
        }
      });

      adContainer.addEventListener("mouseover", function () {
        // Trigger hover event on each iframe inside the adContainer
        clearTimeout(hoverTimeout); // Clear previous timeout if exists

        for (var i = 0; i < adsIframes.length; i++) {
          var iframe = adsIframes[i];
          var link = links[i];
          if (!iframe.dataset.hoverTriggered || link.dataset.hoverTriggered) {
            var event = new MouseEvent("mouseover", {
              bubbles: true,
              cancelable: true,
              view: window,
            });
            iframe.dispatchEvent(event);
            link.dispatchEvent(event);
            iframe.dataset.hoverTriggered = true; // Set the flag to true
            link.dataset.hoverTriggered = true;
            console.log("Hover event called for iframe:", iframe.id);
          }
        }
      });

      adContainer.addEventListener("mouseout", function () {
        // Clear the hover event if the mouse moves out of the container
        clearTimeout(hoverTimeout);
      });

      // Hover event listener for each iframe
      for (var i = 0; i < adsIframes.length; i++) {
        var iframe = adsIframes[i];
        var link = links[i];
        iframe.addEventListener("mouseover", function () {
          console.log("Mouseover event called for iframe:", this.id);
        });
        link.addEventListener("mouseover", function () {
          console.log("Mouseover event called for iframe:", this.id);
        });
      }
    </script>
  </body>
</html>
